public void mineBlock() {
    // Mine block and add it to the blockchain
    Block newBlock = mineNewBlock();
    blockchain.addBlock(newBlock);

    // Check if new blockchain is the longest chain
    boolean longestChainFound = chooseChain();

    // If new blockchain is the longest chain, broadcast it to all miners and users
    if (longestChainFound) {
        broadcast(blockchain.getChain());
    }
}






public class Miner extends Thread {
    private final Blockchain blockchain;

    public Miner(Blockchain blockchain) {
        this.blockchain = blockchain;
    }

    public void run() {
        while (!isInterrupted()) {
            Block block = mineBlock();
            blockchain.addBlock(block);

            // Notify all waiting threads that a new block has been added
            synchronized (blockchain) {
                blockchain.notifyNewBlock();
            }
        }
    }

    // ...
}
